---
layout: post
title:  "Operating System： Process Synchronization"
date:   2019-11-16
excerpt: ""
tag:
- Operating System
---

本文主要参考《计算机操作系统（第四版）》（西安电子科技大学出版社）以及清华大学操作系统公开课（向勇、陈渝），整理操作系统的基本概念，供自己复习查阅。

# 进程同步

为保证多个进程能有条不紊地运行，多道程序系统中引入了进程同步机制。常见的同步机制有硬件同步机制、信号量机制、管程机制。

## 基本概念

进程同步机制的主要任务是对多个相关进程的执行次序进行协调，使并发的进程之间能按照一定的规则共享系统资源，使程序的执行具有**可再现性**。

### 制约关系

1. 间接制约：对于临界资源，进程只能互斥地访问，对于这类资源，必须由系统统一分配；
2. 直接制约：直接制约源于进程的相互合作。

### 临界资源（Critical Resource）

一次仅允许一个进程使用的资源称为临界资源（Critical Resource）。许多物理设备都属于临界资源，如输入机、打印机等。

### 临界区（Critical Section）

在进程中访问临界资源的那段代码称为临界区。访问临界资源的循环进程可以描述如下：

```c++
while(true) {
	OnCriticalSectionEnter(); // 进入区代码，检查待访问资源，设置正在访问标志
	OnCriticalSection(); // 临界区代码
	OnCriticalSectionExit(); // 退出区代码，把标志位恢复为未被访问的状态
	DoOtherThings(); // 剩余区代码，不属于访问临界资源的范围
}
```

### 同步规则

1. 临界资源空闲时让请求进程立即进入临界区；
2. 临界资源被访问时让其他请求进程等待；
3. 对访问临界资源的进程，应保证在有限时间内能进入临界区；
4. 当进程不能进入临界区时应立即释放处理机。

## 硬件同步机制

许多计算机提供了一些特殊的硬件指令解决临界区问题，如：关中断、Test-and-Set指令、Swap指令。

## 信号量（Semaphore）机制

信号量机制是由荷兰学者Dijkstra提出的一种进程同步工具，是目前使用最广泛的同步机制。

## 管程机制

管程机制可以理解为封装的信号量机制，它包含了面向对象的思想。